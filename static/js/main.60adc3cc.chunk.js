(this["webpackJsonpmychat.frontend"]=this["webpackJsonpmychat.frontend"]||[]).push([[0],{48:function(e,t,n){},76:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),a=n(40),o=n.n(a),r=(n(48),n(11)),i=n.n(r),l=n(43),u=n(15),j=n(8),b=n(27),d=n(81),m=n(82);function f(e){var t=document.cookie,n=e+"=",s=t.indexOf("; "+n);if(-1===s){if(0!==(s=t.indexOf(n)))return null}else{s+=2;var c=document.cookie.indexOf(";",s);-1===c&&(c=t.length)}return decodeURI(t.substring(s+n.length,c))}function h(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}var O=n(12),p=n.n(O),v=n(2),x=function(e){var t=e.joinRoom,n=Object(s.useState)(h(f("token"))),c=Object(j.a)(n,1)[0],a=Object(s.useState)(),o=Object(j.a)(a,2),r=o[0],l=o[1],b=Object(s.useState)("https://bsite.net/Kanan02/api/Sessions"),O=Object(j.a)(b,1)[0],x=Object(s.useState)(null),g=Object(j.a)(x,2),N=g[0],S=g[1];console.log(N);var w=function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("https://bsite.net/Kanan02/api/Sessions/GetActiveSessions");case 2:n=e.sent,console.log(n),S(Array.from(n.data).map((function(e){return Object(v.jsxs)("li",{className:"list-group-item mt-1",children:[" ",e.sessionName,"  ",e.numberOfPlayers,"/",e.maxNumberOfPlayers," ",Object(v.jsx)("button",{onClick:function(){return n=e.sessionName,s=e.id,void p.a.put("https://bsite.net/Kanan02/api/Sessions/PlayerJoined/".concat(s,"?userId=").concat(c.Id)).then((function(e){console.log(n),console.log(c.UserName),t(c.UserName,n,s)})).catch((function(e){console.log(e)}));var n,s},children:"Join"})," "]},e.id)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){w()}),[]),Object(v.jsxs)("div",{children:[Object(v.jsxs)(d.a,{className:"lobby",onSubmit:function(e){e.preventDefault(),console.log(r+"  "+c.Id),p.a.post(O,{sessionName:r,adminId:c.Id}).then((function(e){console.log(e),t(c.UserName,r,e.data)})).catch((function(e){console.log(e)}))},children:[Object(v.jsx)(d.a.Group,{children:Object(v.jsx)(d.a.Control,{placeholder:"New room name",onChange:function(e){return l(e.target.value)}})}),Object(v.jsx)(m.a,{variant:"success",type:"submit",disabled:!r,children:"Create room"})]}),Object(v.jsxs)("div",{className:"row mt-2",children:[Object(v.jsx)("div",{className:"col-3"}),Object(v.jsx)("div",{className:"col-6 mt-4",children:Object(v.jsx)("h3",{children:"Active Rooms"})}),Object(v.jsx)("div",{className:"col-3"})]}),Object(v.jsxs)("div",{className:"row mt-1 ",children:[Object(v.jsx)("div",{className:"col-3"}),Object(v.jsx)("div",{className:"col-6 ",children:Object(v.jsx)("ul",{className:"list-group overflow-hidden",children:N})}),Object(v.jsx)("div",{className:"col-3"})]})]})},g=n(80),N=n(42),S=function(e){var t=e.sendMessage,n=(e.sendUserRoles,Object(s.useState)("")),c=Object(j.a)(n,2),a=c[0],o=c[1];return Object(v.jsx)(d.a,{onSubmit:function(e){e.preventDefault(),t(a),o("")},children:Object(v.jsxs)(g.a,{children:[Object(v.jsx)(N.a,{type:"user",placeholder:"message...",onChange:function(e){return o(e.target.value)},value:a}),Object(v.jsx)(g.a.Append,{children:Object(v.jsx)(m.a,{variant:"primary",type:"submit",disabled:!a,children:"Send"})})]})})},w=function(e){var t=e.messages,n=Object(s.useRef)();return Object(s.useEffect)((function(){if(n&&n.current){var e=n.current,t=e.scrollHeight,s=e.clientHeight;n.current.scrollTo({left:0,top:t-s,behavior:"smooth"})}}),[t]),Object(v.jsx)("div",{ref:n,className:"message-container",children:t.map((function(e,t){return Object(v.jsxs)("div",{className:"user-message",children:[Object(v.jsx)("div",{className:"message bg-primary",children:e.message}),Object(v.jsx)("div",{className:"from-user",children:e.user})]},t)}))})},k=function(e){var t=e.users;return Object(v.jsxs)("div",{className:"user-list",children:[Object(v.jsx)("h4",{children:"Connected Users"}),t.map((function(e,t){return Object(v.jsx)("h6",{children:e},t)}))]})},y=n(5),R=n.n(y),I=function(e){var t=e.sendMessage,n=e.messages,c=e.users,a=e.userRoles,o=(e.bot,e.sessionId),r=e.closeConnection,i=e.informRoleDistribution,l=Object(s.useState)(h(f("token"))),u=Object(j.a)(l,1)[0],b=Object(s.useState)(!1),d=Object(j.a)(b,2),O=d[0],x=d[1],g=Object(s.useState)(!0),N=Object(j.a)(g,2),y=N[0],I=N[1],C=!0,U=Object(s.useState)(null),D=Object(j.a)(U,2),M=D[0],A=D[1],K=Object(s.useState)(null),P=Object(j.a)(K,2),E=P[0],J=P[1],L=Object(s.useState)(null),G=Object(j.a)(L,2),F=G[0],T=G[1],B=Object(s.useState)(null),H=Object(j.a)(B,2),_=H[0],Z=H[1];function q(){p.a.put("https://bsite.net/Kanan02/api/Sessions/PlayerLeft/".concat(o)).then((function(e){r(),J(null),T(null),Z(null)})).catch((function(e){console.log(e)}))}Object(s.useEffect)((function(){window.addEventListener("beforeunload",(function(){q()}))}),[]);var z=R()({"mx-2":!0,"admin-button":O,"user-button":y});if(Object(s.useEffect)((function(){p.a.get("https://bsite.net/Kanan02/api/Sessions/GetAdmin/".concat(o)).then((function(e){e.data==u.Id&&(x(!0),I(!1))})).catch((function(e){console.log(e)}))}),[]),a){for(var Q=null,V=0;V<a.length;V++)a[V].userId==u.Id&&(Q=a[V].roleId);null!=Q&&3!=Q&&(C=!1,p.a.get("https://bsite.net/Kanan02/api/Roles/".concat(Q)).then((function(e){J(e.data.role1),T(e.data.roleDescription),Z(e.data.rolePhoto),console.log(_)})).catch((function(e){console.log(e)})))}var W=R()({"invisible-img":C});return Object(v.jsx)("div",{className:"mx-5 mb-3",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-9",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col mx-3",children:Object(v.jsx)("h3",{children:M})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("div",{className:"leave-room mx-5",children:[Object(v.jsx)(m.a,{variant:"primary",className:z,onClick:function(){p.a.put("https://bsite.net/Kanan02/api/GameSessionsUsersRoles/DistributeRoles?sessionId=".concat(o)).then((function(e){A(e.data),i()})).catch((function(e){console.log(e)}))},children:"Start Game"}),Object(v.jsx)(m.a,{variant:"danger",onClick:function(){return q()},children:"Leave Room"})]})})]}),Object(v.jsx)(k,{users:c}),Object(v.jsxs)("div",{className:"chat mx-5",children:[Object(v.jsx)(w,{messages:n}),Object(v.jsx)(S,{sendMessage:t})]})]}),Object(v.jsxs)("div",{className:"col-2 mx-1",children:[Object(v.jsx)("h2",{children:E}),Object(v.jsx)("p",{className:"roledisc",children:F}),Object(v.jsx)("img",{className:W,width:"150",height:"200",src:"data:image/png;base64,".concat(_)})]})]})})},C=(n(76),n(77),function(){var e=Object(s.useState)(),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)([]),o=Object(j.a)(a,2),r=o[0],d=o[1],m=Object(s.useState)([]),f=Object(j.a)(m,2),h=f[0],O=f[1],p=Object(s.useState)(),g=Object(j.a)(p,2),N=g[0],S=g[1],w=Object(s.useState)([]),k=Object(j.a)(w,2),y=k[0],R=k[1],C=Object(s.useState)(null),U=Object(j.a)(C,2),D=U[0],M=U[1],A=function(){var e=Object(u.a)(i.a.mark((function e(t,n,s){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=(new b.a).withUrl("https://bsite.net/MafiaAZ/chat").configureLogging(b.b.Information).build()).on("ReceiveMessage",(function(e,t){d((function(n){return[].concat(Object(l.a)(n),[{user:e,message:t}])}))})),a.on("ReceiveUsersRoles",(function(e,t){O(t),S(e)})),a.on("UsersInRoom",(function(e){R(e)})),M(s),a.onclose((function(e){c(),d([]),R([])})),e.next=9,a.start();case 9:return e.next=11,a.invoke("JoinRoom",{user:t,room:n});case 11:c(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,s){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(D),e.next=4,n.invoke("InformRoleDistribution",D);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.invoke("SendMessage",t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O([]),e.next=4,n.stop();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"app container-fluid",children:[Object(v.jsxs)("div",{className:"row w-100",children:[Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("a",{onClick:function(){E(),window.location.href="https://kenan812.github.io/"},children:Object(v.jsx)("img",{alt:"image",src:"/playground_assets/1-removebg-preview-200h.png",className:"profile-image"})})}),Object(v.jsx)("div",{className:"col-2"})]}),n?Object(v.jsx)(I,{sendMessage:P,messages:r,users:y,userRoles:h,bot:N,sessionId:D,closeConnection:E,informRoleDistribution:K}):Object(v.jsx)(x,{joinRoom:A})]})}),U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),s(e),c(e),a(e),o(e)}))};o.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root")),U()}},[[78,1,2]]]);
//# sourceMappingURL=main.60adc3cc.chunk.js.map